import { ApiRequestHandler, ApiService } from '../../api';
import { TelemetrySyncRequest, TelemetrySyncStat } from '..';
import { KeyValueStore } from '../../key-value-store';
import { SdkConfig } from '../../sdk-config';
import { DeviceInfo } from '../../util/device';
import { DbService } from '../../db';
import { SharedPreferences } from '../../util/shared-preferences';
import { AppInfo } from '../../util/app';
import { DeviceRegisterService } from '../../device-register';
import { Observable } from 'rxjs';
import { NetworkQueue } from '../../api/network-queue';
export declare class TelemetrySyncHandler implements ApiRequestHandler<TelemetrySyncRequest, TelemetrySyncStat> {
    private dbService;
    private sdkConfig;
    private deviceInfo;
    private sharedPreferences;
    private appInfoService;
    private deviceRegisterService;
    private keyValueStore?;
    private apiService?;
    private networkQueue?;
    static readonly TELEMETRY_LOG_MIN_ALLOWED_OFFSET_KEY = "telemetry_log_min_allowed_offset_key";
    private static readonly LAST_SYNCED_DEVICE_REGISTER_ATTEMPT_TIME_STAMP_KEY;
    private static readonly LAST_SYNCED_DEVICE_REGISTER_IS_SUCCESSFUL_KEY;
    static readonly TELEMETRY_ENDPOINT = "/telemetry";
    private static readonly REGISTER_API_SUCCESS_TTL;
    private static readonly REGISTER_API_FAILURE_TTL;
    private readonly preprocessors;
    private readonly telemetryConfig;
    private readonly apiConfig;
    constructor(dbService: DbService, sdkConfig: SdkConfig, deviceInfo: DeviceInfo, sharedPreferences: SharedPreferences, appInfoService: AppInfo, deviceRegisterService: DeviceRegisterService, keyValueStore?: KeyValueStore | undefined, apiService?: ApiService | undefined, networkQueue?: NetworkQueue | undefined);
    resetDeviceRegisterTTL(): Observable<undefined>;
    handle({ ignoreSyncThreshold, ignoreAutoSyncMode }: TelemetrySyncRequest): Observable<TelemetrySyncStat>;
    processEventsBatch(isForceSynced: boolean): Observable<number>;
    private registerDevice;
    private hasTelemetryThresholdCrossed;
    private fetchEvents;
    private processEvents;
    private persistinNetworkQueue;
    private deleteEvents;
}
